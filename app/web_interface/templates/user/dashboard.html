<!-- web_interface/templates/user/dashboard.html -->
{% extends "base.html" %}
{% block title %}Mon Tableau de Bord — B-CraftD{% endblock %}

{% block content %}
<h2 class="text-lg font-semibold mb-4">Mon tableau de bord</h2>

<div class="grid md:grid-cols-2 gap-4">
  <div class="bg-white p-4 shadow rounded">
    <h3 class="font-semibold">Profil</h3>
    <div id="profile-block" class="mt-3"></div>
  </div>

  <div class="bg-white p-4 shadow rounded">
    <h3 class="font-semibold">Actions rapides</h3>
    <p class="mt-2">
      <a class="btn" href="/user/inventory">Inventaire</a>
      <a class="btn ml-2" href="/user/crafting">Crafting</a>
    </p>
  </div>
</div>
{% endblock %}

{% block scripts %}
<script>
async function loadDashboard(){
  try{
    const me = await httpGetJson('/api/user/me/');
    document.getElementById('profile-block').innerHTML = `
      <p>${me.firstname} ${me.lastname}</p>
      <p>${me.mail}</p>
    `;
  }catch(err){
    console.error(err);
    document.getElementById('profile-block').innerText = 'Impossible de récupérer le profil';
  }
}
loadDashboard();
</script>
{% endblock %}
